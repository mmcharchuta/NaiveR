---
title: "Prepare SILVA Test Dataset"
author: "mmcharchuta"
date: "`r Sys.Date()`"
# No output will be generated by default if you omit the `output:` field.
# To ensure all paths are relative to the benchmarking directory, set the working directory at the start.

# (No output specified)

---

```{r}
setwd("benchmarking")  # Set working directory to the parent directory (benchmarking)
# Download and prepare test dataset in R
library(NaiveR)

# If you have internet access from R
# download.file(
#   "https://www.arb-silva.de/fileadmin/silva_databases/release_138_1/Exports/SILVA_138.1_SSURef_NR99_tax_silva_trunc.fasta.gz",
#   "silva_sequences.fasta.gz"
# )

# Read full dataset
silva_data <- read_fasta("silva_sequences.fasta")

# Create test subset
set.seed(123)  # For reproducibility
test_indices <- sample(nrow(silva_data), 500)
test_data <- silva_data[test_indices, ]

# Save test dataset
write_fasta(test_data, "test_sequences.fasta")

# Extract true taxonomy for accuracy testing
true_taxonomy <- data.frame(
  sequence_id = test_data$id,
  true_taxonomy = test_data$comment,  # or wherever taxonomy is stored
  stringsAsFactors = FALSE
)

write.csv(true_taxonomy, "true_taxonomy.csv", row.names = FALSE)
```